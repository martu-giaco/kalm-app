{{-- resources/views/auth/terms.blade.php --}}
<x-layout title="Términos y Condiciones - Kälm">
    <div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow">

        <h1 class="text-2xl font-semibold mb-4">Términos y Condiciones — Kälm</h1>

        {{-- CONTENIDO DE TÉRMINOS: solo este bloque es scrollable --}}
        <div class="mb-6">
            <div class="border rounded p-4 h-72 overflow-auto prose text-md leading-relaxed">
                <h2 class="font-semibold">1. Introducción</h2>
                <p>
                    Bienvenido a Kälm. Estos Términos y Condiciones regulan el acceso y uso de la aplicación Kälm
                    (en adelante, la “Plataforma”), sus funcionalidades de asesoramiento de skincare, haircare y
                    contenidos de naturaleza dermatológica, así como cualquier servicio o producto ofrecido a través de la misma.
                    Al registrarse y utilizar la Plataforma usted acepta estos Términos en su totalidad.
                </p>

                <h2 class="font-semibold mt-5">2. Naturaleza del asesoramiento</h2>
                <p>
                    Los contenidos, recomendaciones, planes de cuidado, guías y comunicaciones ofrecidas por la Plataforma
                    o por profesionales vinculados se brindan con fines informativos y de orientación general. No constituyen
                    un diagnóstico médico ni sustituyen la evaluación presencial por un dermatólogo o profesional de la salud.
                    Para problemas médicos, condiciones dermatológicas complejas, reacciones alérgicas o urgencias, el usuario
                    deberá consultar de inmediato a un profesional sanitario habilitado.
                </p>

                <h2 class="font-semibold mt-5">3. Teleconsulta y servicios profesionales</h2>
                <p>
                    Cuando la Plataforma facilite la conexión con profesionales (teleconsultas, asesorías personalizadas,
                    seguimiento), dichas prestaciones estarán sujetas a acuerdos y condiciones específicas, y en tal caso
                    podrá requerirse la aceptación adicional de términos propios del profesional o del servicio.
                    Kälm actúa como facilitador tecnológico salvo que se indique expresamente lo contrario.
                </p>

                <h2 class="font-semibold mt-5">4. Responsabilidad y limitación</h2>
                <p>
                    En la máxima medida permitida por la ley, Kälm, sus propietarios, desarrolladores, empleados y
                    colaboradores quedan exentos de responsabilidad por daños directos, indirectos, incidentales, especiales,
                    punitivos o consecuenciales, pérdida de datos, lucro cesante o cualquier otra pérdida derivada del uso
                    o imposibilidad de uso de la Plataforma, de las recomendaciones recibidas o de la compra/uso de productos.
                </p>

                <h2 class="font-semibold mt-5">5. Productos y recomendaciones</h2>
                <p>
                    Si la Plataforma provee recomendaciones de productos o permite la compra de los mismos, Kälm no garantiza
                    resultados específicos ni la ausencia de reacciones adversas; es responsabilidad del usuario verificar
                    ingredientes, contraindicaciones y realizar pruebas de sensibilidad cuando corresponda. Las descripciones,
                    precios y disponibilidad de productos pueden variar y dependen de terceros proveedores.
                </p>

                <h2 class="font-semibold mt-5">6. Consentimiento para uso de imágenes y datos</h2>
                <p>
                    Para brindar asesoramiento personalizado, la Plataforma podrá solicitar al usuario imágenes, información
                    corporal o datos sensibles relacionados con su piel o cabello. Con el envío de dichos materiales, el usuario
                    otorga su consentimiento para el tratamiento de los mismos conforme a la Política de Privacidad. El
                    usuario declara que posee los derechos sobre las imágenes enviadas o que cuenta con las autorizaciones necesarias.
                </p>

                <h2 class="font-semibold mt-5">7. Privacidad y tratamiento de datos</h2>
                <p>
                    El tratamiento de datos personales se realizará conforme a la Política de Privacidad vigente, disponible
                    en la Plataforma. Al registrarse, el usuario autoriza el tratamiento de sus datos para las finalidades
                    allí descritas (prestación del servicio, newsletters, marketing con consentimiento cuando corresponda, etc.).
                </p>

                <h2 class="font-semibold mt-5">8. Contenido del usuario y conducta</h2>
                <p>
                    El usuario es responsable del contenido que publique o comparta en la Plataforma. Queda prohibido compartir
                    material ilícito, ofensivo, difamatorio o que infrinja derechos de terceros. Kälm podrá eliminar contenido
                    que infrinja estos Términos y suspender o cancelar cuentas que violen las normas.
                </p>

                <h2 class="font-semibold mt-5">9. Propiedad intelectual</h2>
                <p>
                    Todos los derechos de propiedad intelectual sobre el software, diseño, textos, imágenes y demás contenidos
                    de la Plataforma pertenecen a sus titulares. El usuario no adquiere derechos sobre los mismos salvo la
                    licencia limitada de uso personal y no comercial.
                </p>

                <h2 class="font-semibold mt-5">10. Pagos y reembolsos</h2>
                <p>
                    Cuando se ofrezcan servicios o productos pagos, las condiciones de pago, cancelación y reembolso se
                    regirán por las políticas específicas de la Plataforma o del proveedor indicado. Kälm no es responsable
                    por pagos realizados fuera de los canales autorizados.
                </p>

                <h2 class="font-semibold mt-5">11. Enlaces y servicios de terceros</h2>
                <p>
                    La Plataforma puede contener enlaces a sitios de terceros. Kälm no es responsable por el contenido,
                    políticas o prácticas de dichos sitios.
                </p>

                <h2 class="font-semibold mt-5">12. Modificaciones del servicio y de los Términos</h2>
                <p>
                    Kälm podrá modificar, suspender o discontinuar parcial o totalmente la Plataforma en cualquier momento.
                    Asimismo, estos Términos podrán ser actualizados; las versiones tendrán vigencia a partir de su publicación.
                    El uso continuado implica la aceptación de las modificaciones.
                </p>

                <h2 class="font-semibold mt-5">13. Edad mínima</h2>
                <p>
                    El uso de la Plataforma está restringido a personas mayores de edad conforme a la legislación aplicable.
                    Menores podrán usar la Plataforma únicamente con el consentimiento y supervisión de sus representantes legales.
                </p>

                <h2 class="font-semibold mt-5">14. Indemnidad</h2>
                <p>
                    El usuario se obliga a mantener indemne a Kälm frente a cualquier reclamo, daño, pérdida o gasto (incluyendo
                    honorarios razonables de abogados) que surja por su incumplimiento de estos Términos o por el uso indebido
                    de la Plataforma.
                </p>

                <h2 class="font-semibold mt-5">15. Ley aplicable y jurisdicción</h2>
                <p>
                    Estos Términos se regirán por la legislación aplicable en la jurisdicción donde Kälm tenga su domicilio
                    legal. Para todo conflicto que derive del presente, las partes se someten a los tribunales competentes de
                    dicha jurisdicción, con renuncia expresa a cualquier otro fuero.
                </p>

                <p class="mt-4">
                    Si tiene dudas sobre estos Términos o desea más información sobre nuestro tratamiento de datos, consulte
                    la Política de Privacidad o contáctenos a través de los canales oficiales que figuran en la Plataforma.
                </p>
            </div>
        </div>

        {{-- ZONA FIJA: checkbox + botón (siempre visible) --}}
        <form action="{{ route('auth.terms.accept') }}" method="POST" id="termsForm">
            @csrf

            <div class="flex flex-col gap-3">
                {{-- Hacemos que el label se muestre con la misma apariencia que el botón --}}
                <label for="termsCheck" class="inline-flex items-center gap-3">
                    <input id="termsCheck" name="accept_terms" type="checkbox" value="1" class="form-checkbox h-4 w-4">
                    {{-- Este span usa la misma clase visual que el botón para que "se vea igual que el botón" --}}
                    <span class="btn-primary inline-block px-4 py-2 text-sm font-medium select-none">
                        Acepto los Términos y Condiciones y la Política de Privacidad
                    </span>
                </label>

                @error('accept_terms')
                    <p class="text-red-600 text-sm mt-1">{{ $message }}</p>
                @enderror

                <div class="flex items-center gap-3">
                    <a href="{{ route('auth.register') }}" class="btn-secondary">Volver</a>

                    <button
                        id="acceptBtn"
                        type="submit"
                        class="btn-primary opacity-50 cursor-not-allowed"
                        disabled
                    >
                        Aceptar y completar registro
                    </button>
                </div>
            </div>
        </form>
    </div>

    {{-- JS inline para habilitar el botón y sincronizar estados --}}
    <script>
        (function () {
            const checkbox = document.getElementById('termsCheck');
            const button = document.getElementById('acceptBtn');

            // Inicializamos: si el checkbox ya estaba marcado (ej. volver atrás), lo respetamos
            if (checkbox.checked) {
                button.disabled = false;
                button.classList.remove('opacity-50', 'cursor-not-allowed');
            }

            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    button.disabled = false;
                    button.classList.remove('opacity-50', 'cursor-not-allowed');
                } else {
                    button.disabled = true;
                    button.classList.add('opacity-50', 'cursor-not-allowed');
                }
            });

            // Prevención adicional: impedir enviar sin checkbox (por si JS falla)
            document.getElementById('termsForm').addEventListener('submit', function (e) {
                if (! checkbox.checked) {
                    e.preventDefault();
                    alert('Debes aceptar los Términos y Condiciones para completar el registro.');
                }
            });
        })();
    </script>
</x-layout>
